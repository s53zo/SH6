<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SH6 Hamradio Log Report</title>
  <link rel="stylesheet" href="style.css?v=5.2.23">
  <link rel="icon" href="favicon.ico" sizes="any">
  <link rel="icon" type="image/png" href="favicon-32x32.png" sizes="32x32">
  <link rel="apple-touch-icon" href="apple-touch-icon.png">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
</head>
<body class="ui-theme-nt">
  <table class="app-topbar-shell" cellpadding="0" cellspacing="0" border="0" style="border-bottom:1px dotted #cccccc;" width="100%">
    <tr>
      <td>
        <div class="brand">
          <img class="brand-logo" src="SH6_logo.png" alt="SH6" decoding="async">
          <span class="subtitle">Client-side hamradio log report</span>
        </div>
      </td>
      <td valign="top" align="right">
        <div class="no-print nav-buttons">
          <button id="prevBtn" type="button" disabled>&lt; Prev</button>
          <button id="nextBtn" type="button" disabled>Next &gt;</button>
        </div>
      </td>
    </tr>
  </table>

  <table class="ta1 app-layout-shell" cellspacing="0" cellpadding="0">
    <tr>
      <td class="no-print sidebar" style="width:17%" valign="top">
        <div style="width:100%;min-width:220px;" class="mdv">
          <div class="nav-tools">
            <label class="nav-search-label" for="navSearchInput">Find report</label>
            <input id="navSearchInput" type="search" placeholder="Jump to report..." autocomplete="off">
          </div>
          <ol id="navList">
            <!-- Navigation entries are injected by main.js -->
          </ol>
        </div>
        <div class="sidebar-meta">
          <div class="meta-line">
            <a class="version-badge" id="appVersion" href="CHANGELOG.md" target="_blank" rel="noopener"></a>
            <span class="meta-sep">•</span>
            <span>by</span>
            <a class="author-link" href="https://www.qrz.com/db/S53ZO" target="_blank" rel="noopener noreferrer">S53ZO</a>
          </div>
        </div>
        <div class="data-status" id="dataStatus">
          <div>cty.dat: <span id="ctyStatus">pending</span> <span id="ctySourceLabel" class="source-indicator"></span></div>
          <div>MASTER.DTA: <span id="masterStatus">pending</span> <span id="masterSourceLabel" class="source-indicator"></span></div>
          <div id="qthStatusRow" class="status-row hidden">QTH data: <span id="qthStatus">pending</span> <span id="qthSourceLabel" class="source-indicator"></span></div>
          <div id="cqApiStatusRow" class="status-row hidden">CQ API: <span id="cqApiStatus">pending</span> <span id="cqApiSourceLabel" class="source-indicator"></span></div>
          <div id="spotsStatusRow" class="status-row hidden">Spots: <span id="spotsStatus">pending</span> <span id="spotsSourceLabel" class="source-indicator"></span></div>
          <div id="rbnStatusRow" class="status-row hidden">RBN spots: <span id="rbnStatus">pending</span> <span id="rbnSourceLabel" class="source-indicator"></span></div>
          <div id="spotHunterStatusRow" class="status-row hidden">Spot hunter: <span id="spotHunterStatus">pending</span> <span id="spotHunterSourceLabel" class="source-indicator"></span></div>
        </div>
      </td>
      <td style="width:83%" valign="top">
        <div class="content">
          <div id="loadPanel">
            <div class="load-panel-head">
              <div class="load-panel-title">Start log selection</div>
              <div class="load-panel-subtitle">Set compare mode first, then load logs into active slots.</div>
            </div>
            <div class="load-step">
              <div class="load-step-title">Step 1 · Choose compare mode</div>
              <div class="compare-toggle" role="group" aria-label="Compare logs">
                <div class="compare-toggle-title">Compare logs</div>
                <div class="compare-options">
                  <label class="compare-option">
                    <input type="radio" name="compareCount" value="1" checked>
                    <span>1</span>
                  </label>
                  <label class="compare-option">
                    <input type="radio" name="compareCount" value="2">
                    <span>2</span>
                  </label>
                  <label class="compare-option">
                    <input type="radio" name="compareCount" value="3">
                    <span>3</span>
                  </label>
                  <label class="compare-option">
                    <input type="radio" name="compareCount" value="4">
                    <span>4</span>
                  </label>
                </div>
                <div class="compare-helper" id="compareHelper">Single log mode</div>
              </div>
            </div>
            <div class="load-step">
              <div class="load-step-title">Step 2 · Load logs</div>
              <div class="load-step-note">Choose a source per slot: upload, archive search, or demo log.
                <span class="load-tip-badge"><span class="load-tip-title">Author recommends</span> try archive search! Great for log comparison.</span>
              </div>
            <div class="log-panel log-a" data-slot="A">
              <div class="log-panel-header">
                <div class="log-panel-title">Log A</div>
                <div class="slot-status status-empty" id="slotStatusA">Empty</div>
              </div>
              <div class="slot-choices" role="tablist" aria-label="Log A source">
                <button type="button" class="slot-choice is-active" data-slot="A" data-action="upload">Upload</button>
                <button type="button" class="slot-choice slot-choice-archive" data-slot="A" data-action="archive">Archive</button>
                <button type="button" class="slot-choice slot-choice-demo" data-slot="A" data-action="demo">Demo</button>
              </div>
              <div class="slot-panels">
                <div class="slot-panel is-active" data-panel="upload">
                  <div class="slot-action-title">Upload from computer</div>
                  <div class="controls">
                    <label class="drop-zone" id="dropZoneA">
                      <input type="file" id="fileInput" accept=".adi,.adif,.cbf,.cbr,.log,.CBF,.ADI,.ADIF,.CBR,.LOG" hidden>
                      <span class="drop-zone-inner">
                        <span class="button">Upload Log A</span>
                        <span class="drop-hint">Drag &amp; Drop log to load</span>
                      </span>
                    </label>
                  </div>
                </div>
                <div class="slot-panel" data-panel="archive">
                  <div class="slot-action-title">Search archive</div>
                  <div class="repo-compact" id="repoCompact" hidden>
                    <span id="repoCompactText">Loaded from archive.</span>
                    <button type="button" class="link-button repo-change" data-slot="A">Change</button>
                  </div>
                  <div class="repo-controls" id="repoControls">
                    <div class="remote-label">Public archive at <a href="https://github.com/s53zo/Hamradio-Contest-logs-Archives" target="_blank" rel="noopener noreferrer">GitHub</a>. Search by callsign:</div>
                    <input id="repoSearch" type="text" placeholder="Type a callsign (letters + number)..." autocomplete="off">
                    <div class="repo-filters" id="repoFilters"></div>
                    <div id="repoStatus" class="status"></div>
                    <div id="repoResults" class="repo-results"></div>
                  </div>
                </div>
                <div class="slot-panel" data-panel="demo">
                  <div class="slot-action-title">Demo log</div>
                  <div class="controls">
                    <button type="button" class="button demo-log-btn" data-slot="A">Load demo log</button>
                    <span class="slot-note">Use a sample log to explore reports.</span>
                  </div>
                </div>
              </div>
              <div class="slot-summary status" id="fileStatus">No log loaded</div>
            </div>
            <div class="log-panel log-b compare-only compare-only-2" data-slot="B">
              <div class="log-panel-header">
                <div class="log-panel-title">Log B</div>
                <div class="slot-status status-empty" id="slotStatusB">Empty</div>
              </div>
              <div class="slot-choices" role="tablist" aria-label="Log B source">
                <button type="button" class="slot-choice is-active" data-slot="B" data-action="upload">Upload</button>
                <button type="button" class="slot-choice slot-choice-archive" data-slot="B" data-action="archive">Archive</button>
                <button type="button" class="slot-choice slot-choice-demo" data-slot="B" data-action="demo">Demo</button>
              </div>
              <div class="slot-panels">
                <div class="slot-panel is-active" data-panel="upload">
                  <div class="slot-action-title">Upload from computer</div>
                  <div class="controls">
                    <label class="drop-zone" id="dropZoneB">
                      <input type="file" id="fileInputB" accept=".adi,.adif,.cbf,.cbr,.log,.CBF,.ADI,.ADIF,.CBR,.LOG" hidden>
                      <span class="drop-zone-inner">
                        <span class="button">Upload Log B</span>
                        <span class="drop-hint">Drag &amp; Drop log to load</span>
                      </span>
                    </label>
                  </div>
                </div>
                <div class="slot-panel" data-panel="archive">
                  <div class="slot-action-title">Search archive</div>
                  <div class="repo-compact" id="repoCompactB" hidden>
                    <span id="repoCompactTextB">Loaded from archive.</span>
                    <button type="button" class="link-button repo-change" data-slot="B">Change</button>
                  </div>
                  <div class="repo-controls" id="repoControlsB">
                    <div class="remote-label">Public archive at <a href="https://github.com/s53zo/Hamradio-Contest-logs-Archives" target="_blank" rel="noopener noreferrer">GitHub</a>. Search by callsign:</div>
                    <input id="repoSearchB" type="text" placeholder="Type a callsign (letters + number)..." autocomplete="off">
                    <div class="repo-filters" id="repoFiltersB"></div>
                    <div id="repoStatusB" class="status"></div>
                    <div id="repoResultsB" class="repo-results"></div>
                  </div>
                </div>
                <div class="slot-panel" data-panel="demo">
                  <div class="slot-action-title">Demo log</div>
                  <div class="controls">
                    <button type="button" class="button demo-log-btn" data-slot="B">Load demo log</button>
                    <span class="slot-note">Use a sample log to explore reports.</span>
                  </div>
                </div>
              </div>
              <div class="slot-summary status" id="fileStatusB">No log loaded</div>
            </div>
            <div class="log-panel log-c compare-only compare-only-3" data-slot="C">
              <div class="log-panel-header">
                <div class="log-panel-title">Log C</div>
                <div class="slot-status status-empty" id="slotStatusC">Empty</div>
              </div>
              <div class="slot-choices" role="tablist" aria-label="Log C source">
                <button type="button" class="slot-choice is-active" data-slot="C" data-action="upload">Upload</button>
                <button type="button" class="slot-choice slot-choice-archive" data-slot="C" data-action="archive">Archive</button>
                <button type="button" class="slot-choice slot-choice-demo" data-slot="C" data-action="demo">Demo</button>
              </div>
              <div class="slot-panels">
                <div class="slot-panel is-active" data-panel="upload">
                  <div class="slot-action-title">Upload from computer</div>
                  <div class="controls">
                    <label class="drop-zone" id="dropZoneC">
                      <input type="file" id="fileInputC" accept=".adi,.adif,.cbf,.cbr,.log,.CBF,.ADI,.ADIF,.CBR,.LOG" hidden>
                      <span class="drop-zone-inner">
                        <span class="button">Upload Log C</span>
                        <span class="drop-hint">Drag &amp; Drop log to load</span>
                      </span>
                    </label>
                  </div>
                </div>
                <div class="slot-panel" data-panel="archive">
                  <div class="slot-action-title">Search archive</div>
                  <div class="repo-compact" id="repoCompactC" hidden>
                    <span id="repoCompactTextC">Loaded from archive.</span>
                    <button type="button" class="link-button repo-change" data-slot="C">Change</button>
                  </div>
                  <div class="repo-controls" id="repoControlsC">
                    <div class="remote-label">Public archive at <a href="https://github.com/s53zo/Hamradio-Contest-logs-Archives" target="_blank" rel="noopener noreferrer">GitHub</a>. Search by callsign:</div>
                    <input id="repoSearchC" type="text" placeholder="Type a callsign (letters + number)..." autocomplete="off">
                    <div class="repo-filters" id="repoFiltersC"></div>
                    <div id="repoStatusC" class="status"></div>
                    <div id="repoResultsC" class="repo-results"></div>
                  </div>
                </div>
                <div class="slot-panel" data-panel="demo">
                  <div class="slot-action-title">Demo log</div>
                  <div class="controls">
                    <button type="button" class="button demo-log-btn" data-slot="C">Load demo log</button>
                    <span class="slot-note">Use a sample log to explore reports.</span>
                  </div>
                </div>
              </div>
              <div class="slot-summary status" id="fileStatusC">No log loaded</div>
            </div>
            <div class="log-panel log-d compare-only compare-only-4" data-slot="D">
              <div class="log-panel-header">
                <div class="log-panel-title">Log D</div>
                <div class="slot-status status-empty" id="slotStatusD">Empty</div>
              </div>
              <div class="slot-choices" role="tablist" aria-label="Log D source">
                <button type="button" class="slot-choice is-active" data-slot="D" data-action="upload">Upload</button>
                <button type="button" class="slot-choice slot-choice-archive" data-slot="D" data-action="archive">Archive</button>
                <button type="button" class="slot-choice slot-choice-demo" data-slot="D" data-action="demo">Demo</button>
              </div>
              <div class="slot-panels">
                <div class="slot-panel is-active" data-panel="upload">
                  <div class="slot-action-title">Upload from computer</div>
                  <div class="controls">
                    <label class="drop-zone" id="dropZoneD">
                      <input type="file" id="fileInputD" accept=".adi,.adif,.cbf,.cbr,.log,.CBF,.ADI,.ADIF,.CBR,.LOG" hidden>
                      <span class="drop-zone-inner">
                        <span class="button">Upload Log D</span>
                        <span class="drop-hint">Drag &amp; Drop log to load</span>
                      </span>
                    </label>
                  </div>
                </div>
                <div class="slot-panel" data-panel="archive">
                  <div class="slot-action-title">Search archive</div>
                  <div class="repo-compact" id="repoCompactD" hidden>
                    <span id="repoCompactTextD">Loaded from archive.</span>
                    <button type="button" class="link-button repo-change" data-slot="D">Change</button>
                  </div>
                  <div class="repo-controls" id="repoControlsD">
                    <div class="remote-label">Public archive at <a href="https://github.com/s53zo/Hamradio-Contest-logs-Archives" target="_blank" rel="noopener noreferrer">GitHub</a>. Search by callsign:</div>
                    <input id="repoSearchD" type="text" placeholder="Type a callsign (letters + number)..." autocomplete="off">
                    <div class="repo-filters" id="repoFiltersD"></div>
                    <div id="repoStatusD" class="status"></div>
                    <div id="repoResultsD" class="repo-results"></div>
                  </div>
                </div>
                <div class="slot-panel" data-panel="demo">
                  <div class="slot-action-title">Demo log</div>
                  <div class="controls">
                    <button type="button" class="button demo-log-btn" data-slot="D">Load demo log</button>
                    <span class="slot-note">Use a sample log to explore reports.</span>
                  </div>
                </div>
              </div>
              <div class="slot-summary status" id="fileStatusD">No log loaded</div>
            </div>
            <div class="load-summary" id="loadSummary">
              <div class="load-summary-title">Ready</div>
              <div class="load-summary-items" id="loadSummaryItems"></div>
              <div class="load-summary-actions">
                <button type="button" class="button" id="viewReportsBtn" disabled>View reports</button>
                <span class="load-summary-hint" id="loadSummaryHint">Load at least one log to continue.</span>
              </div>
            </div>
            </div>
          </div>
          <div class="band-ribbon no-print" id="bandRibbon"></div>
          <div id="viewTitle" class="view-title gradient">Welcome</div>
          <div id="viewContainer" class="view-container">
            <p>Upload a hamradio log in ADIF or CBF to generate SH6-style reports. The app will fetch the current <code>cty.dat</code> and <code>MASTER.DTA</code> files at runtime.</p>
          </div>
        </div>
      </td>
    </tr>
  </table>

  <div class="drag-overlay" id="dragOverlay" aria-hidden="true">
    <div class="drag-overlay-message">Drag &amp; Drop log to load</div>
  </div>
  <div class="drop-replace" id="dropReplace" aria-hidden="true">
    <div class="drop-replace-card">
      <div class="drop-replace-title">All slots are filled</div>
      <div class="drop-replace-text">Choose a slot to replace with the dropped file.</div>
      <div class="drop-replace-actions" id="dropReplaceActions"></div>
      <button type="button" class="link-button" id="dropReplaceCancel">Cancel</button>
    </div>
  </div>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sql.js@1.8.0/dist/sql-wasm.js"></script>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-N11FPFQNJG"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-N11FPFQNJG');
  </script>
  <script src="main.js?v=5.2.23"></script>
</body>
</html>

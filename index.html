<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SH6 Hamradio Log Report</title>
  <link rel="stylesheet" href="style.css">
  <link rel="icon" href="favicon.ico" sizes="any">
  <link rel="icon" type="image/png" href="favicon-32x32.png" sizes="32x32">
  <link rel="apple-touch-icon" href="apple-touch-icon.png">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
</head>
<body>
  <table cellpadding="0" cellspacing="0" border="0" style="border-bottom:1px dotted #cccccc;" width="100%">
    <tr>
      <td>
        <div class="brand">
          <img class="brand-logo" src="SH6_logo.png" alt="SH6" decoding="async">
          <span class="subtitle">Client-side hamradio log report</span>
        </div>
      </td>
      <td valign="top" align="right">
        <div class="no-print nav-buttons">
          <button id="prevBtn" type="button" disabled>&lt; Prev</button>
          <button id="nextBtn" type="button" disabled>Next &gt;</button>
        </div>
      </td>
    </tr>
  </table>

  <table class="ta1" cellspacing="0" cellpadding="0">
    <tr>
      <td class="no-print sidebar" style="width:17%" valign="top">
        <div style="width:100%;min-width:220px;" class="mdv">
          <ol id="navList">
            <!-- Navigation entries are injected by main.js -->
          </ol>
        </div>
        <div class="sidebar-meta">
          <div class="meta-line">
            <a class="version-badge" id="appVersion" href="CHANGELOG.md" target="_blank" rel="noopener"></a>
            <span class="meta-sep">•</span>
            <span>by</span>
            <a class="author-link" href="https://www.qrz.com/db/S53ZO" target="_blank" rel="noopener noreferrer">S53ZO</a>
          </div>
        </div>
        <div class="data-status" id="dataStatus">
          <div>cty.dat: <span id="ctyStatus">pending</span> <span id="ctySourceLabel" class="source-indicator"></span></div>
          <div>MASTER.DTA: <span id="masterStatus">pending</span> <span id="masterSourceLabel" class="source-indicator"></span></div>
          <div id="qthStatusRow" class="status-row hidden">QTH data: <span id="qthStatus">pending</span> <span id="qthSourceLabel" class="source-indicator"></span></div>
          <div id="spotsStatusRow" class="status-row hidden">Spots: <span id="spotsStatus">pending</span> <span id="spotsSourceLabel" class="source-indicator"></span></div>
          <div id="rbnStatusRow" class="status-row hidden">RBN spots: <span id="rbnStatus">pending</span> <span id="rbnSourceLabel" class="source-indicator"></span></div>
        </div>
      </td>
      <td style="width:83%" valign="top">
        <div class="content">
          <div id="loadPanel">
            <div class="load-step">
              <div class="load-step-title">Step 1 · Choose compare mode</div>
              <div class="compare-toggle" role="group" aria-label="Compare logs">
                <div class="compare-toggle-title">Compare logs</div>
                <div class="compare-options">
                  <label class="compare-option">
                    <input type="radio" name="compareCount" value="1" checked>
                    <span>1</span>
                  </label>
                  <label class="compare-option">
                    <input type="radio" name="compareCount" value="2">
                    <span>2</span>
                  </label>
                  <label class="compare-option">
                    <input type="radio" name="compareCount" value="3">
                    <span>3</span>
                  </label>
                  <label class="compare-option">
                    <input type="radio" name="compareCount" value="4">
                    <span>4</span>
                  </label>
                </div>
                <div class="compare-helper" id="compareHelper">Single log mode</div>
              </div>
            </div>
            <div class="load-step">
              <div class="load-step-title">Step 2 · Load logs</div>
              <div class="load-step-note">Upload from your computer or search the public archive for each slot.</div>
            <div class="log-panel log-a">
              <div class="log-panel-title">Log A</div>
              <div class="slot-actions">
                <div class="slot-action">
                  <div class="slot-action-title">Upload from computer</div>
                  <div class="controls">
                    <label class="drop-zone" id="dropZoneA">
                      <input type="file" id="fileInput" accept=".adi,.adif,.cbf,.cbr,.log,.CBF,.ADI,.ADIF,.CBR,.LOG" hidden>
                      <span class="drop-zone-inner">
                        <span class="button">Upload Log A</span>
                        <span class="drop-hint">Drag &amp; Drop log to load</span>
                      </span>
                    </label>
                    <div class="status" id="fileStatus">No log loaded</div>
                  </div>
                </div>
                <div class="slot-action">
                  <div class="slot-action-title">Search archive</div>
                  <div class="remote-picker">
                  <div class="remote-label">Public archive at <a href="https://github.com/s53zo/Hamradio-Contest-logs-Archives" target="_blank" rel="noopener noreferrer">GitHub</a>. Search by callsign:</div>
                    <input id="repoSearch" type="text" placeholder="Type a callsign..." autocomplete="off">
                    <label class="repo-option">
                      <input type="checkbox" id="repoAutoClose" checked>
                      Auto-close tree after selection
                    </label>
                    <div id="repoStatus" class="status"></div>
                    <div id="repoResults" class="repo-results"></div>
                  </div>
                </div>
              </div>
            </div>
            <div class="log-panel log-b compare-only compare-only-2">
              <div class="log-panel-title">Log B</div>
              <div class="slot-actions">
                <div class="slot-action">
                  <div class="slot-action-title">Upload from computer</div>
                  <div class="controls">
                    <label class="drop-zone" id="dropZoneB">
                      <input type="file" id="fileInputB" accept=".adi,.adif,.cbf,.cbr,.log,.CBF,.ADI,.ADIF,.CBR,.LOG" hidden>
                      <span class="drop-zone-inner">
                        <span class="button">Upload Log B</span>
                        <span class="drop-hint">Drag &amp; Drop log to load</span>
                      </span>
                    </label>
                    <div class="status" id="fileStatusB">No log loaded</div>
                  </div>
                </div>
                <div class="slot-action">
                  <div class="slot-action-title">Search archive</div>
                  <div class="remote-picker">
                  <div class="remote-label">Public archive at <a href="https://github.com/s53zo/Hamradio-Contest-logs-Archives" target="_blank" rel="noopener noreferrer">GitHub</a>. Search by callsign:</div>
                    <input id="repoSearchB" type="text" placeholder="Type a callsign..." autocomplete="off">
                    <label class="repo-option">
                      <input type="checkbox" id="repoAutoCloseB" checked>
                      Auto-close tree after selection
                    </label>
                    <div id="repoStatusB" class="status"></div>
                    <div id="repoResultsB" class="repo-results"></div>
                  </div>
                </div>
              </div>
            </div>
            <div class="log-panel log-c compare-only compare-only-3">
              <div class="log-panel-title">Log C</div>
              <div class="slot-actions">
                <div class="slot-action">
                  <div class="slot-action-title">Upload from computer</div>
                  <div class="controls">
                    <label class="drop-zone" id="dropZoneC">
                      <input type="file" id="fileInputC" accept=".adi,.adif,.cbf,.cbr,.log,.CBF,.ADI,.ADIF,.CBR,.LOG" hidden>
                      <span class="drop-zone-inner">
                        <span class="button">Upload Log C</span>
                        <span class="drop-hint">Drag &amp; Drop log to load</span>
                      </span>
                    </label>
                    <div class="status" id="fileStatusC">No log loaded</div>
                  </div>
                </div>
                <div class="slot-action">
                  <div class="slot-action-title">Search archive</div>
                  <div class="remote-picker">
                  <div class="remote-label">Public archive at <a href="https://github.com/s53zo/Hamradio-Contest-logs-Archives" target="_blank" rel="noopener noreferrer">GitHub</a>. Search by callsign:</div>
                    <input id="repoSearchC" type="text" placeholder="Type a callsign..." autocomplete="off">
                    <label class="repo-option">
                      <input type="checkbox" id="repoAutoCloseC" checked>
                      Auto-close tree after selection
                    </label>
                    <div id="repoStatusC" class="status"></div>
                    <div id="repoResultsC" class="repo-results"></div>
                  </div>
                </div>
              </div>
            </div>
            <div class="log-panel log-d compare-only compare-only-4">
              <div class="log-panel-title">Log D</div>
              <div class="slot-actions">
                <div class="slot-action">
                  <div class="slot-action-title">Upload from computer</div>
                  <div class="controls">
                    <label class="drop-zone" id="dropZoneD">
                      <input type="file" id="fileInputD" accept=".adi,.adif,.cbf,.cbr,.log,.CBF,.ADI,.ADIF,.CBR,.LOG" hidden>
                      <span class="drop-zone-inner">
                        <span class="button">Upload Log D</span>
                        <span class="drop-hint">Drag &amp; Drop log to load</span>
                      </span>
                    </label>
                    <div class="status" id="fileStatusD">No log loaded</div>
                  </div>
                </div>
                <div class="slot-action">
                  <div class="slot-action-title">Search archive</div>
                  <div class="remote-picker">
                  <div class="remote-label">Public archive at <a href="https://github.com/s53zo/Hamradio-Contest-logs-Archives" target="_blank" rel="noopener noreferrer">GitHub</a>. Search by callsign:</div>
                    <input id="repoSearchD" type="text" placeholder="Type a callsign..." autocomplete="off">
                    <label class="repo-option">
                      <input type="checkbox" id="repoAutoCloseD" checked>
                      Auto-close tree after selection
                    </label>
                    <div id="repoStatusD" class="status"></div>
                    <div id="repoResultsD" class="repo-results"></div>
                  </div>
                </div>
              </div>
            </div>
            </div>
          </div>
          <div class="band-ribbon no-print" id="bandRibbon"></div>
          <div id="viewTitle" class="view-title gradient">Welcome</div>
          <div id="viewContainer" class="view-container">
            <p>Upload a hamradio log in ADIF or CBF to generate SH6-style reports. The app will fetch the current <code>cty.dat</code> and <code>MASTER.DTA</code> files at runtime.</p>
          </div>
        </div>
      </td>
    </tr>
  </table>

  <div class="drag-overlay" id="dragOverlay" aria-hidden="true">
    <div class="drag-overlay-message">Drag &amp; Drop log to load</div>
  </div>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sql.js@1.8.0/dist/sql-wasm.js"></script>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-N11FPFQNJG"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-N11FPFQNJG');
  </script>
  <script src="main.js"></script>
</body>
</html>
